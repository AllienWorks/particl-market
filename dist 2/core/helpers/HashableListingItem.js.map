{"version":3,"file":"HashableListingItem.js","sourceRoot":"","sources":["../../../src/core/helpers/HashableListingItem.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2017-2018, The Particl Market developers\n// Distributed under the GPL software license, see the accompanying\n// file COPYING or https://github.com/particl/particl-market/blob/develop/LICENSE\n\n/**\n * core.api.HashableListingItem\n *\n */\nimport * as resources from 'resources';\nimport { ListingItemCreateRequest } from '../../api/requests/ListingItemCreateRequest';\nimport { ListingItemTemplateCreateRequest } from '../../api/requests/ListingItemTemplateCreateRequest';\n\ntype AllowedHashableTypes = resources.ListingItem | resources.ListingItemTemplate | ListingItemCreateRequest | ListingItemTemplateCreateRequest;\n\nexport class HashableListingItem {\n\n    public title: string;\n    public shortDescription: string;\n    public longDescription: string;\n    public basePrice: string;\n    public paymentAddress: string;\n    public messagingPublicKey: string;\n\n    public nullItemTimestamp: Date;\n\n    // TODO: refactor\n    constructor(hashThis: AllowedHashableTypes, timestampedHash: boolean = false ) {\n        const input = JSON.parse(JSON.stringify(hashThis));\n\n        if (input) {\n            if (!input.itemInformation && !input.paymentInformation && !input.messagingInformation && !input.listingItemObjects) { // model\n                input.ItemInformation = input.ItemInformation\n                    ? input.ItemInformation : {};\n                input.PaymentInformation    = input.PaymentInformation\n                    ? input.PaymentInformation : {};\n                input.PaymentInformation.ItemPrice = input.PaymentInformation.ItemPrice\n                    ? input.PaymentInformation.ItemPrice : {};\n                input.PaymentInformation.ItemPrice.CryptocurrencyAddress = input.PaymentInformation.ItemPrice.CryptocurrencyAddress\n                    ? input.PaymentInformation.ItemPrice.CryptocurrencyAddress : {};\n                input.MessagingInformation  = input.MessagingInformation\n                    ? input.MessagingInformation : {};\n                input.ListingItemObjects    = input.ListingItemObjects\n                    ? input.ListingItemObjects : {};\n\n                input.itemInformation = input.ItemInformation;\n                input.paymentInformation = input.PaymentInformation;\n                input.paymentInformation.itemPrice = input.PaymentInformation.ItemPrice;\n                input.paymentInformation.itemPrice.cryptocurrencyAddress = input.PaymentInformation.ItemPrice.CryptocurrencyAddress;\n                input.messagingInformation = input.MessagingInformation;\n                input.listingItemObjects = input.ListingItemObjects;\n            } else {\n                input.itemInformation = input.itemInformation\n                    ? input.itemInformation : {};\n                input.paymentInformation    = input.paymentInformation\n                    ? input.paymentInformation : {};\n                input.paymentInformation.itemPrice = input.paymentInformation.itemPrice\n                    ? input.paymentInformation.itemPrice : {};\n                input.paymentInformation.itemPrice.cryptocurrencyAddress = input.paymentInformation.itemPrice.cryptocurrencyAddress\n                    ? input.paymentInformation.itemPrice.cryptocurrencyAddress : {};\n                input.messagingInformation  = input.messagingInformation\n                    ? input.messagingInformation : {};\n                input.listingItemObjects    = input.listingItemObjects\n                    ? input.listingItemObjects : {};\n\n            }\n            this.title              = input.itemInformation.title;\n            this.shortDescription   = input.itemInformation.shortDescription;\n            this.longDescription    = input.itemInformation.longDescription;\n            this.basePrice          = input.paymentInformation.itemPrice.basePrice;\n            this.paymentAddress     = input.paymentInformation.itemPrice.cryptocurrencyAddress.address;\n            this.messagingPublicKey = input.messagingInformation.publicKey;\n\n            // TODO: add listingitemobjects to hash\n\n            // hack: allow empty objects for now\n            if ((!this.title && !this.shortDescription && !this.longDescription && !this.basePrice && !this.paymentAddress && !this.messagingPublicKey)\n                || timestampedHash) {\n                this.nullItemTimestamp = new Date();\n            }\n        }\n    }\n\n}\n"]}