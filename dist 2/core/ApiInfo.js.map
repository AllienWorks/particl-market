{"version":3,"file":"ApiInfo.js","sourceRoot":"","sources":["../../src/core/ApiInfo.ts"],"names":[],"mappings":";AAAA,yDAAyD;AACzD,mEAAmE;AACnE,iFAAiF;;AAGjF,uDAAoD;AACpD,2CAAwC;AACxC,6CAA0C;AAG1C;IAEW,MAAM,CAAC,QAAQ;QAClB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;IACnE,CAAC;IAEM,KAAK,CAAC,GAAwB;QACjC,EAAE,CAAC,CAAC,yBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YACrD,GAAG,CAAC,GAAG,CACH,OAAO,CAAC,QAAQ,EAAE,EAClB,CAAC,GAAsB,EAAE,GAAuB;gBAC5C,oCAAoC;gBACpC,MAAM,KAAK,GAAG;oBACV,KAAK,EAAE,EAAE;iBACZ,CAAC;gBACF,EAAE,CAAC,CAAC,yBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;oBACpD,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC;wBAClB,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,qBAAS,CAAC,QAAQ,EAAE,EAAE,CAAC;gBACvE,CAAC;gBACD,EAAE,CAAC,CAAC,yBAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;oBACpD,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC;wBAClB,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,uBAAU,CAAC,QAAQ,EAAE,EAAE,CAAC;gBACxE,CAAC;gBACD,mCAAmC;gBACnC,MAAM,CAAC,GAAG,CAAC,IAAI,iBACX,IAAI,EAAE,qBAAqB,EAC3B,OAAO,EAAE,OAAO,EAChB,WAAW,EAAE,EAAE,IACZ,KAAK,EACV,CAAC;YACP,CAAC,CAAC,CAAC;QACX,CAAC;IACL,CAAC;CACJ;AAjCD,0BAiCC","sourcesContent":["// Copyright (c) 2017-2018, The Particl Market developers\n// Distributed under the GPL software license, see the accompanying\n// file COPYING or https://github.com/particl/particl-market/blob/develop/LICENSE\n\nimport * as express from 'express';\nimport { Environment } from './helpers/Environment';\nimport { SwaggerUI } from './SwaggerUI';\nimport { ApiMonitor } from './ApiMonitor';\n\n\nexport class ApiInfo {\n\n    public static getRoute(): string {\n        return process.env.APP_URL_PREFIX + process.env.API_INFO_ROUTE;\n    }\n\n    public setup(app: express.Application): void {\n        if (Environment.isTruthy(process.env.API_INFO_ENABLED)) {\n            app.get(\n                ApiInfo.getRoute(),\n                (req: myExpress.Request, res: myExpress.Response) => {\n                    // const pkg = Environment.getPkg();\n                    const links = {\n                        links: {}\n                    };\n                    if (Environment.isTruthy(process.env.SWAGGER_ENABLED)) {\n                        links.links['swagger'] =\n                            `${app.get('host')}:${app.get('port')}${SwaggerUI.getRoute()}`;\n                    }\n                    if (Environment.isTruthy(process.env.MONITOR_ENABLED)) {\n                        links.links['monitor'] =\n                            `${app.get('host')}:${app.get('port')}${ApiMonitor.getRoute()}`;\n                    }\n                    // todo: get the pkg data somewhere\n                    return res.json({\n                        name: 'particl-marketplace', // pkg.name,\n                        version: 'alpha', // pkg.version,\n                        description: '', // pkg.description,\n                        ...links\n                    });\n                });\n        }\n    }\n}\n"]}