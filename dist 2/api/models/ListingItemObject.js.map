{"version":3,"file":"ListingItemObject.js","sourceRoot":"","sources":["../../../src/api/models/ListingItemObject.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2017-2018, The Particl Market developers\n// Distributed under the GPL software license, see the accompanying\n// file COPYING or https://github.com/particl/particl-market/blob/develop/LICENSE\n\nimport { Bookshelf } from '../../config/Database';\nimport { Collection, Model } from 'bookshelf';\nimport { ListingItem } from './ListingItem';\nimport { ListingItemTemplate } from './ListingItemTemplate';\nimport { ListingItemObjectSearchParams } from '../requests/ListingItemObjectSearchParams';\nimport { ListingItemObjectData } from './ListingItemObjectData';\n\nexport class ListingItemObject extends Bookshelf.Model<ListingItemObject> {\n\n    public static async fetchById(value: number, withRelated: boolean = true): Promise<ListingItemObject> {\n        if (withRelated) {\n            return await ListingItemObject.where<ListingItemObject>({ id: value }).fetch({\n                withRelated: [\n                    'ListingItem',\n                    'ListingItemTemplate',\n                    'ListingItemObjectDatas'\n                ]\n            });\n        } else {\n            return await ListingItemObject.where<ListingItemObject>({ id: value }).fetch();\n        }\n    }\n\n    public static async searchBy(options: ListingItemObjectSearchParams): Promise<Collection<ListingItemObject>> {\n        const listingCollection = ListingItemObject.forge<Model<ListingItemObject>>()\n            .query(qb => {\n                qb.where('listing_item_objects.type', 'LIKE', '%' + options.searchString + '%');\n                qb.orWhere('listing_item_objects.description', 'LIKE', '%' + options.searchString + '%');\n            })\n            .orderBy('listing_item_objects.id', 'ASC');\n\n        return await listingCollection.fetchAll();\n    }\n\n    public get tableName(): string { return 'listing_item_objects'; }\n    public get hasTimestamps(): boolean { return true; }\n\n    public get Id(): number { return this.get('id'); }\n    public set Id(value: number) { this.set('id', value); }\n\n    public get Type(): string { return this.get('type'); }\n    public set Type(value: string) { this.set('type', value); }\n\n    public get ObjectId(): string { return this.get('object_id'); }\n    public set ObjectId(value: string) { this.set('object_id', value); }\n\n    public get ForceInput(): string { return this.get('force_input'); }\n    public set ForceInput(value: string) { this.set('force_input', value); }\n\n    public get Description(): string { return this.get('description'); }\n    public set Description(value: string) { this.set('description', value); }\n\n    public get Order(): number { return this.get('order'); }\n    public set Order(value: number) { this.set('order', value); }\n\n    public get UpdatedAt(): Date { return this.get('updatedAt'); }\n    public set UpdatedAt(value: Date) { this.set('updatedAt', value); }\n\n    public get CreatedAt(): Date { return this.get('createdAt'); }\n    public set CreatedAt(value: Date) { this.set('createdAt', value); }\n\n\n    public ListingItem(): ListingItem {\n        return this.belongsTo(ListingItem, 'listing_item_id', 'id');\n    }\n\n    public ListingItemTemplate(): ListingItemTemplate {\n        return this.belongsTo(ListingItemTemplate, 'listing_item_template_id', 'id');\n    }\n\n    public ListingItemObjectDatas(): Collection<ListingItemObjectData> {\n        return this.hasMany(ListingItemObjectData, 'listing_item_object_id', 'id');\n    }\n\n}\n"]}