{"version":3,"file":"module.js","sourceRoot":"","sources":["../src/module.ts"],"names":[],"mappings":";AAAA,yDAAyD;AACzD,mEAAmE;AACnE,iFAAiF;;AAEjF,4BAA0B;AAE1B,6BAA6B;AAC7B,iDAAoD;AAEpD,IAAI,IAAkB,CAAC;AAEvB;;GAEG;AACH,OAAO,CAAC,KAAK,GAAG,CAAC,OAAY;IACzB,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IACzC,MAAM,WAAW,GAAG;QAChB,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO;QAC5B,QAAQ,EAAE,OAAO;QACjB,OAAO,EAAE,IAAI;QACb,IAAI,EAAE,IAAI;QACV,OAAO,EAAE,IAAI;QACb,oBAAoB,EAAE,IAAI;KAC7B,CAAC;IAEF,MAAM,aAAa,GAAG,OAAO,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,CAAC,WAAW,KAAK,MAAM,GAAG,OAAO,GAAG,EAAE,CAAC;IAC9G,MAAM,SAAS,qBAAO,WAAW,EAAK,aAAa,CAAC,CAAC;IAErD,IAAI,GAAG,qBAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,CAAC,CAAC;IACxD,MAAM,CAAC,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF;;GAEG;AACH,OAAO,CAAC,IAAI,GAAG;IACX,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QACP,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACxB,CAAC;AACL,CAAC,CAAC","sourcesContent":["// Copyright (c) 2017-2018, The Particl Market developers\n// Distributed under the GPL software license, see the accompanying\n// file COPYING or https://github.com/particl/particl-market/blob/develop/LICENSE\n\nimport 'reflect-metadata';\n\nimport * as path from 'path';\nimport { spawn, ChildProcess } from 'child_process';\n\nlet proc: ChildProcess;\n\n/**\n * Spawns the application in a seperate process\n */\nexports.start = (envArgs: any) => {\n    const p = path.join(__dirname, 'app.js');\n    const environment = {\n        APPDATA: process.env.APPDATA,\n        NODE_ENV: 'alpha',\n        TESTNET: true,\n        INIT: true,\n        MIGRATE: true,\n        ELECTRON_RUN_AS_NODE: true\n    };\n\n    const envAdditional = envArgs && typeof envArgs === 'object' && envArgs.constructor === Object ? envArgs : {};\n    const envActual = {...environment, ...envAdditional};\n\n    proc = spawn(process.execPath, [p], { env: envActual });\n    return proc;\n};\n\n/**\n * Stops the process.\n */\nexports.stop = () => {\n    if (proc) {\n        proc.kill('SIGINT');\n    }\n};\n"]}